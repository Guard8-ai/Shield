---
id: api-005
title: Rust OpenAPI/Swagger Support with utoipa
status: done
priority: high
tags:
- api
- rust
- openapi
- swagger
dependencies:
- backend-022
assignee: developer
created: 2026-01-16T14:00:00Z
estimate: 1d
complexity: 5
area: api
---

# Rust OpenAPI/Swagger Support with utoipa

## Context
Add OpenAPI 3.0 documentation generation to Shield Rust library using utoipa. Enable automatic Swagger UI generation for REST APIs using Shield confidential computing features.

## Tasks
- [ ] Add utoipa dependency with feature flag `openapi`
- [ ] Add OpenAPI schemas for all attestation types
- [ ] Create ToSchema derives for request/response types
- [ ] Add path documentation macros
- [ ] Create axum integration with attestation middleware
- [ ] Generate Swagger UI endpoint at /swagger-ui
- [ ] Add ReDoc alternative endpoint at /redoc
- [ ] Write documentation with examples

## Key Components
```rust
#[derive(ToSchema, Serialize, Deserialize)]
pub struct AttestationRequest {
    /// Base64-encoded attestation evidence
    pub attestation: String,
    /// Optional user data binding
    pub user_data: Option<String>,
}

#[derive(ToSchema, Serialize, Deserialize)]
pub struct AttestationResponse {
    /// Whether attestation was verified
    pub verified: bool,
    /// TEE type (nitro, sev_snp, maa, sgx)
    pub tee_type: String,
    /// Measurements extracted from attestation
    pub measurements: HashMap<String, String>,
}
```

## Dependencies
- `utoipa` for OpenAPI generation
- `utoipa-swagger-ui` for Swagger UI (axum feature)
- `utoipa-redoc` for ReDoc

## Acceptance Criteria
- [ ] All attestation types have OpenAPI schemas
- [ ] Swagger UI renders correctly at /swagger-ui
- [ ] API documentation is accurate and complete
- [ ] Works with axum web framework